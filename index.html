<html>
<head>
    <meta charset="utf-8">
    <title>中国地图</title>
</head>
<style>

</style>
<body>
<link rel="stylesheet" href="css/main.css"/>
<script src="https://d3js.org/d3.v3.js"></script>
<script>
    var width = 1000;
    var height = 1000;
    var background_color = "#565656"

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)
        .classed("center", true)
        .append("g")
        .attr("transform", "translate(0,0)");

    var projection = d3.geo.mercator()
        .center([107, 31])
        .scale(850)
        .translate([width / 2, height / 2]);

    var path = d3.geo.path()
        .projection(projection);

    d3.json("china.geojson", function (error, root) {

        if (error)
            return console.error(error);
        // console.log(root.features);

        svg.selectAll("path")
            .data(root.features)
            .enter()
            .append("path")
            .attr("id", function (d, i) {
                console.log(d);
                return d.properties.id ? "g_" + d.properties.id : "";
            })
            .attr("stroke", "#ffffff")
            .attr("stroke-width", 1)
            .attr("fill", function (d, i) {
                return background_color;
            })
            .attr("d", path)
            .on("mouseover", function (d, i) {
                d3.select(this)
                    .attr("fill", "yellow");
            })
            .on("mouseout", function (d, i) {
                d3.select(this)
                    .attr("fill", background_color);
            });
        svg.selectAll("text")
            .data(root.features)
            .enter()
            .append("svg:text")
            .text(function (d) {
                return d.properties.name;
            })
            .attr("x", function (d) {
                return path.centroid(d)[0];
            })
            .attr("y", function (d) {
                return path.centroid(d)[1];
            })
            .attr("text-anchor", "middle")
            .attr("font-size", "6pt")
            .attr("fill","white");
    });

</script>

</body>
</html>